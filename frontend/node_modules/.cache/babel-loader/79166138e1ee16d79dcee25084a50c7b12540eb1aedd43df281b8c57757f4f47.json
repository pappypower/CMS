{"ast":null,"code":"var _jsxFileName = \"E:\\\\Papi\\\\Projects\\\\CMS\\\\frontend\\\\src\\\\components\\\\Auth\\\\ProtectedRoute.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { Box, CircularProgress, Typography } from '@mui/material';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  requiredRoles = []\n}) => {\n  _s();\n  const {\n    isAuthenticated,\n    isLoading,\n    user\n  } = useAuth();\n  const location = useLocation();\n\n  // Show loading spinner while checking authentication\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        minHeight: '100vh',\n        background: 'linear-gradient(135deg, #ffeef8 0%, #f8f4ff 100%)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n        size: 60,\n        sx: {\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        color: \"text.secondary\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Check role-based access\n  if (requiredRoles.length > 0 && user) {\n    const hasRequiredRole = requiredRoles.some(role => user.roles.includes(role));\n    if (!hasRequiredRole) {\n      return /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          minHeight: '100vh',\n          background: 'linear-gradient(135deg, #ffeef8 0%, #f8f4ff 100%)',\n          p: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          gutterBottom: true,\n          color: \"error\",\n          children: \"Access Denied\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          color: \"text.secondary\",\n          textAlign: \"center\",\n          children: [\"You don't have permission to access this page.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), \"Required roles: \", requiredRoles.join(', ')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false);\n};\n_s(ProtectedRoute, \"0B33W4ogs5BUjMlRWEY90S/gYlw=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","Box","CircularProgress","Typography","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","ProtectedRoute","children","requiredRoles","_s","isAuthenticated","isLoading","user","location","sx","display","flexDirection","alignItems","justifyContent","minHeight","background","size","mb","fileName","_jsxFileName","lineNumber","columnNumber","variant","color","to","state","from","replace","length","hasRequiredRole","some","role","roles","includes","p","gutterBottom","textAlign","join","_c","$RefreshReg$"],"sources":["E:/Papi/Projects/CMS/frontend/src/components/Auth/ProtectedRoute.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { Box, CircularProgress, Typography } from '@mui/material';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\ninterface ProtectedRouteProps {\r\n  children: any;\r\n  requiredRoles?: string[];\r\n}\r\n\r\nconst ProtectedRoute = ({ children, requiredRoles = [] }: ProtectedRouteProps) => {\r\n  const { isAuthenticated, isLoading, user } = useAuth();\r\n  const location = useLocation();\r\n\r\n  // Show loading spinner while checking authentication\r\n  if (isLoading) {\r\n    return (\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          minHeight: '100vh',\r\n          background: 'linear-gradient(135deg, #ffeef8 0%, #f8f4ff 100%)',\r\n        }}\r\n      >\r\n        <CircularProgress size={60} sx={{ mb: 2 }} />\r\n        <Typography variant=\"h6\" color=\"text.secondary\">\r\n          Loading...\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  // Redirect to login if not authenticated\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  // Check role-based access\r\n  if (requiredRoles.length > 0 && user) {\r\n    const hasRequiredRole = requiredRoles.some(role => user.roles.includes(role));\r\n    if (!hasRequiredRole) {\r\n      return (\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            minHeight: '100vh',\r\n            background: 'linear-gradient(135deg, #ffeef8 0%, #f8f4ff 100%)',\r\n            p: 3,\r\n          }}\r\n        >\r\n          <Typography variant=\"h4\" gutterBottom color=\"error\">\r\n            Access Denied\r\n          </Typography>\r\n          <Typography variant=\"body1\" color=\"text.secondary\" textAlign=\"center\">\r\n            You don't have permission to access this page.\r\n            <br />\r\n            Required roles: {requiredRoles.join(', ')}\r\n          </Typography>\r\n        </Box>\r\n      );\r\n    }\r\n  }\r\n\r\n  return <>{children}</>;\r\n};\r\n\r\nexport default ProtectedRoute; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}